apply plugin: 'java'
dependencies {
    compile fileTree(dir: 'libs', include: '*.jar')
	compile project(':DorisAndroidCommon')
}


sourceSets {
    main.java.srcDirs = ['src']
    main.resources.srcDirs = ['src']
    test.java.srcDirs = ['tests/java']
    test.resources.srcDirs = ['tests/resources']
}


task(buildDorisDB, dependsOn: 'classes', type: JavaExec) {
	main = 'fr.ffessm.doris.prefetch.PrefetchDorisWebSite'
	classpath = sourceSets.main.runtimeClasspath
	args '-v',  'INIT'
}


task cleanDorisDB(type: Delete) {
	delete 'run'
}

task cleanDorisDBKeepRef(type: Delete) {
  FileTree tree = fileTree(dir: 'run')
  // On n'efface pas html_ref et images_ref pour ne pas avoir à les re-télécharger à chaque fois
  tree.exclude '**/html_ref*'
  tree.exclude '**/images_ref*'
  delete tree
}

task(buildDorisCDDVD, dependsOn: 'classes', type: JavaExec) {
	main = 'fr.ffessm.doris.prefetch.PrefetchDorisWebSite'
	classpath = sourceSets.main.runtimeClasspath
	args '-v',  'CDDVD'
}
